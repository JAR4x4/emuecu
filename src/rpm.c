#include "rpm.h"

#include <avr/pgmspace.h>

// usecs to rpm
// ticks = arange(1696, 100000, 32)

static uint32_t rpm_tab_ticks0_ = 1696;

static const uint16_t rpm_tab_[3072] PROGMEM =
{
  35377,
  34722,
  34090,
  33482,
  32894,
  32327,
  31779,
  31250,
  30737,
  30241,
  29761,
  29296,
  28846,
  28409,
  27985,
  27573,
  27173,
  26785,
  26408,
  26041,
  25684,
  25337,
  25000,
  24671,
  24350,
  24038,
  23734,
  23437,
  23148,
  22865,
  22590,
  22321,
  22058,
  21802,
  21551,
  21306,
  21067,
  20833,
  20604,
  20380,
  20161,
  19946,
  19736,
  19531,
  19329,
  19132,
  18939,
  18750,
  18564,
  18382,
  18203,
  18028,
  17857,
  17688,
  17523,
  17361,
  17201,
  17045,
  16891,
  16741,
  16592,
  16447,
  16304,
  16163,
  16025,
  15889,
  15756,
  15625,
  15495,
  15368,
  15243,
  15120,
  15000,
  14880,
  14763,
  14648,
  14534,
  14423,
  14312,
  14204,
  14097,
  13992,
  13888,
  13786,
  13686,
  13586,
  13489,
  13392,
  13297,
  13204,
  13111,
  13020,
  12931,
  12842,
  12755,
  12668,
  12583,
  12500,
  12417,
  12335,
  12254,
  12175,
  12096,
  12019,
  11942,
  11867,
  11792,
  11718,
  11645,
  11574,
  11503,
  11432,
  11363,
  11295,
  11227,
  11160,
  11094,
  11029,
  10964,
  10901,
  10838,
  10775,
  10714,
  10653,
  10593,
  10533,
  10474,
  10416,
  10359,
  10302,
  10245,
  10190,
  10135,
  10080,
  10026,
  9973,
  9920,
  9868,
  9816,
  9765,
  9715,
  9664,
  9615,
  9566,
  9517,
  9469,
  9422,
  9375,
  9328,
  9282,
  9236,
  9191,
  9146,
  9101,
  9057,
  9014,
  8971,
  8928,
  8886,
  8844,
  8802,
  8761,
  8720,
  8680,
  8640,
  8600,
  8561,
  8522,
  8484,
  8445,
  8408,
  8370,
  8333,
  8296,
  8259,
  8223,
  8187,
  8152,
  8116,
  8081,
  8047,
  8012,
  7978,
  7944,
  7911,
  7878,
  7845,
  7812,
  7780,
  7747,
  7716,
  7684,
  7653,
  7621,
  7591,
  7560,
  7530,
  7500,
  7470,
  7440,
  7411,
  7381,
  7352,
  7324,
  7295,
  7267,
  7239,
  7211,
  7183,
  7156,
  7129,
  7102,
  7075,
  7048,
  7022,
  6996,
  6970,
  6944,
  6918,
  6893,
  6868,
  6843,
  6818,
  6793,
  6768,
  6744,
  6720,
  6696,
  6672,
  6648,
  6625,
  6602,
  6578,
  6555,
  6533,
  6510,
  6487,
  6465,
  6443,
  6421,
  6399,
  6377,
  6355,
  6334,
  6313,
  6291,
  6270,
  6250,
  6229,
  6208,
  6188,
  6167,
  6147,
  6127,
  6107,
  6087,
  6067,
  6048,
  6028,
  6009,
  5990,
  5971,
  5952,
  5933,
  5914,
  5896,
  5877,
  5859,
  5841,
  5822,
  5804,
  5787,
  5769,
  5751,
  5733,
  5716,
  5699,
  5681,
  5664,
  5647,
  5630,
  5613,
  5597,
  5580,
  5563,
  5547,
  5530,
  5514,
  5498,
  5482,
  5466,
  5450,
  5434,
  5419,
  5403,
  5387,
  5372,
  5357,
  5341,
  5326,
  5311,
  5296,
  5281,
  5266,
  5252,
  5237,
  5222,
  5208,
  5193,
  5179,
  5165,
  5151,
  5136,
  5122,
  5108,
  5095,
  5081,
  5067,
  5053,
  5040,
  5026,
  5013,
  5000,
  4986,
  4973,
  4960,
  4947,
  4934,
  4921,
  4908,
  4895,
  4882,
  4870,
  4857,
  4844,
  4832,
  4820,
  4807,
  4795,
  4783,
  4770,
  4758,
  4746,
  4734,
  4722,
  4711,
  4699,
  4687,
  4675,
  4664,
  4652,
  4641,
  4629,
  4618,
  4606,
  4595,
  4584,
  4573,
  4562,
  4550,
  4539,
  4528,
  4518,
  4507,
  4496,
  4485,
  4474,
  4464,
  4453,
  4443,
  4432,
  4422,
  4411,
  4401,
  4391,
  4380,
  4370,
  4360,
  4350,
  4340,
  4330,
  4320,
  4310,
  4300,
  4290,
  4280,
  4271,
  4261,
  4251,
  4242,
  4232,
  4222,
  4213,
  4204,
  4194,
  4185,
  4175,
  4166,
  4157,
  4148,
  4139,
  4129,
  4120,
  4111,
  4102,
  4093,
  4084,
  4076,
  4067,
  4058,
  4049,
  4040,
  4032,
  4023,
  4014,
  4006,
  3997,
  3989,
  3980,
  3972,
  3964,
  3955,
  3947,
  3939,
  3930,
  3922,
  3914,
  3906,
  3898,
  3890,
  3881,
  3873,
  3865,
  3858,
  3850,
  3842,
  3834,
  3826,
  3818,
  3810,
  3803,
  3795,
  3787,
  3780,
  3772,
  3765,
  3757,
  3750,
  3742,
  3735,
  3727,
  3720,
  3712,
  3705,
  3698,
  3690,
  3683,
  3676,
  3669,
  3662,
  3654,
  3647,
  3640,
  3633,
  3626,
  3619,
  3612,
  3605,
  3598,
  3591,
  3585,
  3578,
  3571,
  3564,
  3557,
  3551,
  3544,
  3537,
  3531,
  3524,
  3517,
  3511,
  3504,
  3498,
  3491,
  3485,
  3478,
  3472,
  3465,
  3459,
  3453,
  3446,
  3440,
  3434,
  3427,
  3421,
  3415,
  3409,
  3402,
  3396,
  3390,
  3384,
  3378,
  3372,
  3366,
  3360,
  3354,
  3348,
  3342,
  3336,
  3330,
  3324,
  3318,
  3312,
  3306,
  3301,
  3295,
  3289,
  3283,
  3277,
  3272,
  3266,
  3260,
  3255,
  3249,
  3243,
  3238,
  3232,
  3227,
  3221,
  3216,
  3210,
  3205,
  3199,
  3194,
  3188,
  3183,
  3177,
  3172,
  3167,
  3161,
  3156,
  3151,
  3145,
  3140,
  3135,
  3130,
  3125,
  3119,
  3114,
  3109,
  3104,
  3099,
  3094,
  3088,
  3083,
  3078,
  3073,
  3068,
  3063,
  3058,
  3053,
  3048,
  3043,
  3038,
  3033,
  3029,
  3024,
  3019,
  3014,
  3009,
  3004,
  3000,
  2995,
  2990,
  2985,
  2980,
  2976,
  2971,
  2966,
  2962,
  2957,
  2952,
  2948,
  2943,
  2938,
  2934,
  2929,
  2925,
  2920,
  2916,
  2911,
  2906,
  2902,
  2897,
  2893,
  2889,
  2884,
  2880,
  2875,
  2871,
  2866,
  2862,
  2858,
  2853,
  2849,
  2845,
  2840,
  2836,
  2832,
  2828,
  2823,
  2819,
  2815,
  2811,
  2806,
  2802,
  2798,
  2794,
  2790,
  2786,
  2781,
  2777,
  2773,
  2769,
  2765,
  2761,
  2757,
  2753,
  2749,
  2745,
  2741,
  2737,
  2733,
  2729,
  2725,
  2721,
  2717,
  2713,
  2709,
  2705,
  2701,
  2697,
  2693,
  2690,
  2686,
  2682,
  2678,
  2674,
  2670,
  2667,
  2663,
  2659,
  2655,
  2652,
  2648,
  2644,
  2640,
  2637,
  2633,
  2629,
  2626,
  2622,
  2618,
  2615,
  2611,
  2607,
  2604,
  2600,
  2596,
  2593,
  2589,
  2586,
  2582,
  2579,
  2575,
  2572,
  2568,
  2564,
  2561,
  2557,
  2554,
  2551,
  2547,
  2544,
  2540,
  2537,
  2533,
  2530,
  2526,
  2523,
  2520,
  2516,
  2513,
  2510,
  2506,
  2503,
  2500,
  2496,
  2493,
  2490,
  2486,
  2483,
  2480,
  2476,
  2473,
  2470,
  2467,
  2463,
  2460,
  2457,
  2454,
  2450,
  2447,
  2444,
  2441,
  2438,
  2435,
  2431,
  2428,
  2425,
  2422,
  2419,
  2416,
  2413,
  2410,
  2406,
  2403,
  2400,
  2397,
  2394,
  2391,
  2388,
  2385,
  2382,
  2379,
  2376,
  2373,
  2370,
  2367,
  2364,
  2361,
  2358,
  2355,
  2352,
  2349,
  2346,
  2343,
  2340,
  2337,
  2334,
  2332,
  2329,
  2326,
  2323,
  2320,
  2317,
  2314,
  2311,
  2309,
  2306,
  2303,
  2300,
  2297,
  2294,
  2292,
  2289,
  2286,
  2283,
  2281,
  2278,
  2275,
  2272,
  2269,
  2267,
  2264,
  2261,
  2259,
  2256,
  2253,
  2250,
  2248,
  2245,
  2242,
  2240,
  2237,
  2234,
  2232,
  2229,
  2226,
  2224,
  2221,
  2218,
  2216,
  2213,
  2211,
  2208,
  2205,
  2203,
  2200,
  2198,
  2195,
  2192,
  2190,
  2187,
  2185,
  2182,
  2180,
  2177,
  2175,
  2172,
  2170,
  2167,
  2165,
  2162,
  2160,
  2157,
  2155,
  2152,
  2150,
  2147,
  2145,
  2142,
  2140,
  2137,
  2135,
  2133,
  2130,
  2128,
  2125,
  2123,
  2121,
  2118,
  2116,
  2113,
  2111,
  2109,
  2106,
  2104,
  2102,
  2099,
  2097,
  2094,
  2092,
  2090,
  2087,
  2085,
  2083,
  2081,
  2078,
  2076,
  2074,
  2071,
  2069,
  2067,
  2064,
  2062,
  2060,
  2058,
  2055,
  2053,
  2051,
  2049,
  2046,
  2044,
  2042,
  2040,
  2038,
  2035,
  2033,
  2031,
  2029,
  2027,
  2024,
  2022,
  2020,
  2018,
  2016,
  2013,
  2011,
  2009,
  2007,
  2005,
  2003,
  2001,
  1998,
  1996,
  1994,
  1992,
  1990,
  1988,
  1986,
  1984,
  1982,
  1979,
  1977,
  1975,
  1973,
  1971,
  1969,
  1967,
  1965,
  1963,
  1961,
  1959,
  1957,
  1955,
  1953,
  1951,
  1949,
  1947,
  1945,
  1943,
  1940,
  1938,
  1936,
  1934,
  1932,
  1930,
  1929,
  1927,
  1925,
  1923,
  1921,
  1919,
  1917,
  1915,
  1913,
  1911,
  1909,
  1907,
  1905,
  1903,
  1901,
  1899,
  1897,
  1895,
  1893,
  1892,
  1890,
  1888,
  1886,
  1884,
  1882,
  1880,
  1878,
  1876,
  1875,
  1873,
  1871,
  1869,
  1867,
  1865,
  1863,
  1861,
  1860,
  1858,
  1856,
  1854,
  1852,
  1850,
  1849,
  1847,
  1845,
  1843,
  1841,
  1840,
  1838,
  1836,
  1834,
  1832,
  1831,
  1829,
  1827,
  1825,
  1823,
  1822,
  1820,
  1818,
  1816,
  1815,
  1813,
  1811,
  1809,
  1808,
  1806,
  1804,
  1802,
  1801,
  1799,
  1797,
  1795,
  1794,
  1792,
  1790,
  1789,
  1787,
  1785,
  1784,
  1782,
  1780,
  1778,
  1777,
  1775,
  1773,
  1772,
  1770,
  1768,
  1767,
  1765,
  1763,
  1762,
  1760,
  1758,
  1757,
  1755,
  1753,
  1752,
  1750,
  1749,
  1747,
  1745,
  1744,
  1742,
  1740,
  1739,
  1737,
  1736,
  1734,
  1732,
  1731,
  1729,
  1728,
  1726,
  1724,
  1723,
  1721,
  1720,
  1718,
  1717,
  1715,
  1713,
  1712,
  1710,
  1709,
  1707,
  1706,
  1704,
  1702,
  1701,
  1699,
  1698,
  1696,
  1695,
  1693,
  1692,
  1690,
  1689,
  1687,
  1686,
  1684,
  1683,
  1681,
  1680,
  1678,
  1677,
  1675,
  1674,
  1672,
  1671,
  1669,
  1668,
  1666,
  1665,
  1663,
  1662,
  1660,
  1659,
  1657,
  1656,
  1654,
  1653,
  1651,
  1650,
  1649,
  1647,
  1646,
  1644,
  1643,
  1641,
  1640,
  1638,
  1637,
  1636,
  1634,
  1633,
  1631,
  1630,
  1629,
  1627,
  1626,
  1624,
  1623,
  1621,
  1620,
  1619,
  1617,
  1616,
  1614,
  1613,
  1612,
  1610,
  1609,
  1608,
  1606,
  1605,
  1603,
  1602,
  1601,
  1599,
  1598,
  1597,
  1595,
  1594,
  1593,
  1591,
  1590,
  1588,
  1587,
  1586,
  1584,
  1583,
  1582,
  1580,
  1579,
  1578,
  1576,
  1575,
  1574,
  1572,
  1571,
  1570,
  1569,
  1567,
  1566,
  1565,
  1563,
  1562,
  1561,
  1559,
  1558,
  1557,
  1556,
  1554,
  1553,
  1552,
  1550,
  1549,
  1548,
  1547,
  1545,
  1544,
  1543,
  1541,
  1540,
  1539,
  1538,
  1536,
  1535,
  1534,
  1533,
  1531,
  1530,
  1529,
  1528,
  1526,
  1525,
  1524,
  1523,
  1521,
  1520,
  1519,
  1518,
  1516,
  1515,
  1514,
  1513,
  1512,
  1510,
  1509,
  1508,
  1507,
  1506,
  1504,
  1503,
  1502,
  1501,
  1500,
  1498,
  1497,
  1496,
  1495,
  1494,
  1492,
  1491,
  1490,
  1489,
  1488,
  1486,
  1485,
  1484,
  1483,
  1482,
  1481,
  1479,
  1478,
  1477,
  1476,
  1475,
  1474,
  1472,
  1471,
  1470,
  1469,
  1468,
  1467,
  1465,
  1464,
  1463,
  1462,
  1461,
  1460,
  1459,
  1458,
  1456,
  1455,
  1454,
  1453,
  1452,
  1451,
  1450,
  1448,
  1447,
  1446,
  1445,
  1444,
  1443,
  1442,
  1441,
  1440,
  1438,
  1437,
  1436,
  1435,
  1434,
  1433,
  1432,
  1431,
  1430,
  1429,
  1428,
  1426,
  1425,
  1424,
  1423,
  1422,
  1421,
  1420,
  1419,
  1418,
  1417,
  1416,
  1415,
  1414,
  1412,
  1411,
  1410,
  1409,
  1408,
  1407,
  1406,
  1405,
  1404,
  1403,
  1402,
  1401,
  1400,
  1399,
  1398,
  1397,
  1396,
  1395,
  1394,
  1393,
  1391,
  1390,
  1389,
  1388,
  1387,
  1386,
  1385,
  1384,
  1383,
  1382,
  1381,
  1380,
  1379,
  1378,
  1377,
  1376,
  1375,
  1374,
  1373,
  1372,
  1371,
  1370,
  1369,
  1368,
  1367,
  1366,
  1365,
  1364,
  1363,
  1362,
  1361,
  1360,
  1359,
  1358,
  1357,
  1356,
  1355,
  1354,
  1353,
  1352,
  1351,
  1350,
  1349,
  1348,
  1347,
  1346,
  1346,
  1345,
  1344,
  1343,
  1342,
  1341,
  1340,
  1339,
  1338,
  1337,
  1336,
  1335,
  1334,
  1333,
  1332,
  1331,
  1330,
  1329,
  1328,
  1327,
  1326,
  1326,
  1325,
  1324,
  1323,
  1322,
  1321,
  1320,
  1319,
  1318,
  1317,
  1316,
  1315,
  1314,
  1313,
  1313,
  1312,
  1311,
  1310,
  1309,
  1308,
  1307,
  1306,
  1305,
  1304,
  1303,
  1302,
  1302,
  1301,
  1300,
  1299,
  1298,
  1297,
  1296,
  1295,
  1294,
  1293,
  1293,
  1292,
  1291,
  1290,
  1289,
  1288,
  1287,
  1286,
  1286,
  1285,
  1284,
  1283,
  1282,
  1281,
  1280,
  1279,
  1278,
  1278,
  1277,
  1276,
  1275,
  1274,
  1273,
  1272,
  1272,
  1271,
  1270,
  1269,
  1268,
  1267,
  1266,
  1266,
  1265,
  1264,
  1263,
  1262,
  1261,
  1260,
  1260,
  1259,
  1258,
  1257,
  1256,
  1255,
  1255,
  1254,
  1253,
  1252,
  1251,
  1250,
  1250,
  1249,
  1248,
  1247,
  1246,
  1245,
  1245,
  1244,
  1243,
  1242,
  1241,
  1240,
  1240,
  1239,
  1238,
  1237,
  1236,
  1235,
  1235,
  1234,
  1233,
  1232,
  1231,
  1231,
  1230,
  1229,
  1228,
  1227,
  1227,
  1226,
  1225,
  1224,
  1223,
  1223,
  1222,
  1221,
  1220,
  1219,
  1219,
  1218,
  1217,
  1216,
  1215,
  1215,
  1214,
  1213,
  1212,
  1212,
  1211,
  1210,
  1209,
  1208,
  1208,
  1207,
  1206,
  1205,
  1205,
  1204,
  1203,
  1202,
  1201,
  1201,
  1200,
  1199,
  1198,
  1198,
  1197,
  1196,
  1195,
  1195,
  1194,
  1193,
  1192,
  1191,
  1191,
  1190,
  1189,
  1188,
  1188,
  1187,
  1186,
  1185,
  1185,
  1184,
  1183,
  1182,
  1182,
  1181,
  1180,
  1179,
  1179,
  1178,
  1177,
  1177,
  1176,
  1175,
  1174,
  1174,
  1173,
  1172,
  1171,
  1171,
  1170,
  1169,
  1168,
  1168,
  1167,
  1166,
  1166,
  1165,
  1164,
  1163,
  1163,
  1162,
  1161,
  1160,
  1160,
  1159,
  1158,
  1158,
  1157,
  1156,
  1155,
  1155,
  1154,
  1153,
  1153,
  1152,
  1151,
  1151,
  1150,
  1149,
  1148,
  1148,
  1147,
  1146,
  1146,
  1145,
  1144,
  1143,
  1143,
  1142,
  1141,
  1141,
  1140,
  1139,
  1139,
  1138,
  1137,
  1137,
  1136,
  1135,
  1134,
  1134,
  1133,
  1132,
  1132,
  1131,
  1130,
  1130,
  1129,
  1128,
  1128,
  1127,
  1126,
  1126,
  1125,
  1124,
  1124,
  1123,
  1122,
  1122,
  1121,
  1120,
  1120,
  1119,
  1118,
  1118,
  1117,
  1116,
  1116,
  1115,
  1114,
  1114,
  1113,
  1112,
  1112,
  1111,
  1110,
  1110,
  1109,
  1108,
  1108,
  1107,
  1106,
  1106,
  1105,
  1104,
  1104,
  1103,
  1102,
  1102,
  1101,
  1100,
  1100,
  1099,
  1099,
  1098,
  1097,
  1097,
  1096,
  1095,
  1095,
  1094,
  1093,
  1093,
  1092,
  1092,
  1091,
  1090,
  1090,
  1089,
  1088,
  1088,
  1087,
  1086,
  1086,
  1085,
  1085,
  1084,
  1083,
  1083,
  1082,
  1081,
  1081,
  1080,
  1080,
  1079,
  1078,
  1078,
  1077,
  1076,
  1076,
  1075,
  1075,
  1074,
  1073,
  1073,
  1072,
  1072,
  1071,
  1070,
  1070,
  1069,
  1068,
  1068,
  1067,
  1067,
  1066,
  1065,
  1065,
  1064,
  1064,
  1063,
  1062,
  1062,
  1061,
  1061,
  1060,
  1059,
  1059,
  1058,
  1058,
  1057,
  1056,
  1056,
  1055,
  1055,
  1054,
  1053,
  1053,
  1052,
  1052,
  1051,
  1051,
  1050,
  1049,
  1049,
  1048,
  1048,
  1047,
  1046,
  1046,
  1045,
  1045,
  1044,
  1043,
  1043,
  1042,
  1042,
  1041,
  1041,
  1040,
  1039,
  1039,
  1038,
  1038,
  1037,
  1037,
  1036,
  1035,
  1035,
  1034,
  1034,
  1033,
  1033,
  1032,
  1031,
  1031,
  1030,
  1030,
  1029,
  1029,
  1028,
  1027,
  1027,
  1026,
  1026,
  1025,
  1025,
  1024,
  1024,
  1023,
  1022,
  1022,
  1021,
  1021,
  1020,
  1020,
  1019,
  1019,
  1018,
  1017,
  1017,
  1016,
  1016,
  1015,
  1015,
  1014,
  1014,
  1013,
  1012,
  1012,
  1011,
  1011,
  1010,
  1010,
  1009,
  1009,
  1008,
  1008,
  1007,
  1006,
  1006,
  1005,
  1005,
  1004,
  1004,
  1003,
  1003,
  1002,
  1002,
  1001,
  1001,
  1000,
  1000,
  999,
  998,
  998,
  997,
  997,
  996,
  996,
  995,
  995,
  994,
  994,
  993,
  993,
  992,
  992,
  991,
  991,
  990,
  989,
  989,
  988,
  988,
  987,
  987,
  986,
  986,
  985,
  985,
  984,
  984,
  983,
  983,
  982,
  982,
  981,
  981,
  980,
  980,
  979,
  979,
  978,
  978,
  977,
  977,
  976,
  976,
  975,
  975,
  974,
  974,
  973,
  973,
  972,
  972,
  971,
  970,
  970,
  969,
  969,
  968,
  968,
  967,
  967,
  966,
  966,
  965,
  965,
  965,
  964,
  964,
  963,
  963,
  962,
  962,
  961,
  961,
  960,
  960,
  959,
  959,
  958,
  958,
  957,
  957,
  956,
  956,
  955,
  955,
  954,
  954,
  953,
  953,
  952,
  952,
  951,
  951,
  950,
  950,
  949,
  949,
  948,
  948,
  947,
  947,
  946,
  946,
  946,
  945,
  945,
  944,
  944,
  943,
  943,
  942,
  942,
  941,
  941,
  940,
  940,
  939,
  939,
  938,
  938,
  937,
  937,
  937,
  936,
  936,
  935,
  935,
  934,
  934,
  933,
  933,
  932,
  932,
  931,
  931,
  930,
  930,
  930,
  929,
  929,
  928,
  928,
  927,
  927,
  926,
  926,
  925,
  925,
  925,
  924,
  924,
  923,
  923,
  922,
  922,
  921,
  921,
  920,
  920,
  920,
  919,
  919,
  918,
  918,
  917,
  917,
  916,
  916,
  915,
  915,
  915,
  914,
  914,
  913,
  913,
  912,
  912,
  911,
  911,
  911,
  910,
  910,
  909,
  909,
  908,
  908,
  907,
  907,
  907,
  906,
  906,
  905,
  905,
  904,
  904,
  904,
  903,
  903,
  902,
  902,
  901,
  901,
  901,
  900,
  900,
  899,
  899,
  898,
  898,
  897,
  897,
  897,
  896,
  896,
  895,
  895,
  894,
  894,
  894,
  893,
  893,
  892,
  892,
  892,
  891,
  891,
  890,
  890,
  889,
  889,
  889,
  888,
  888,
  887,
  887,
  886,
  886,
  886,
  885,
  885,
  884,
  884,
  884,
  883,
  883,
  882,
  882,
  881,
  881,
  881,
  880,
  880,
  879,
  879,
  879,
  878,
  878,
  877,
  877,
  876,
  876,
  876,
  875,
  875,
  874,
  874,
  874,
  873,
  873,
  872,
  872,
  872,
  871,
  871,
  870,
  870,
  870,
  869,
  869,
  868,
  868,
  868,
  867,
  867,
  866,
  866,
  866,
  865,
  865,
  864,
  864,
  864,
  863,
  863,
  862,
  862,
  862,
  861,
  861,
  860,
  860,
  860,
  859,
  859,
  858,
  858,
  858,
  857,
  857,
  856,
  856,
  856,
  855,
  855,
  854,
  854,
  854,
  853,
  853,
  853,
  852,
  852,
  851,
  851,
  851,
  850,
  850,
  849,
  849,
  849,
  848,
  848,
  848,
  847,
  847,
  846,
  846,
  846,
  845,
  845,
  844,
  844,
  844,
  843,
  843,
  843,
  842,
  842,
  841,
  841,
  841,
  840,
  840,
  840,
  839,
  839,
  838,
  838,
  838,
  837,
  837,
  837,
  836,
  836,
  835,
  835,
  835,
  834,
  834,
  834,
  833,
  833,
  832,
  832,
  832,
  831,
  831,
  831,
  830,
  830,
  830,
  829,
  829,
  828,
  828,
  828,
  827,
  827,
  827,
  826,
  826,
  825,
  825,
  825,
  824,
  824,
  824,
  823,
  823,
  823,
  822,
  822,
  822,
  821,
  821,
  820,
  820,
  820,
  819,
  819,
  819,
  818,
  818,
  818,
  817,
  817,
  816,
  816,
  816,
  815,
  815,
  815,
  814,
  814,
  814,
  813,
  813,
  813,
  812,
  812,
  812,
  811,
  811,
  810,
  810,
  810,
  809,
  809,
  809,
  808,
  808,
  808,
  807,
  807,
  807,
  806,
  806,
  806,
  805,
  805,
  805,
  804,
  804,
  804,
  803,
  803,
  802,
  802,
  802,
  801,
  801,
  801,
  800,
  800,
  800,
  799,
  799,
  799,
  798,
  798,
  798,
  797,
  797,
  797,
  796,
  796,
  796,
  795,
  795,
  795,
  794,
  794,
  794,
  793,
  793,
  793,
  792,
  792,
  792,
  791,
  791,
  791,
  790,
  790,
  790,
  789,
  789,
  789,
  788,
  788,
  788,
  787,
  787,
  787,
  786,
  786,
  786,
  785,
  785,
  785,
  784,
  784,
  784,
  783,
  783,
  783,
  782,
  782,
  782,
  781,
  781,
  781,
  780,
  780,
  780,
  779,
  779,
  779,
  778,
  778,
  778,
  778,
  777,
  777,
  777,
  776,
  776,
  776,
  775,
  775,
  775,
  774,
  774,
  774,
  773,
  773,
  773,
  772,
  772,
  772,
  771,
  771,
  771,
  770,
  770,
  770,
  770,
  769,
  769,
  769,
  768,
  768,
  768,
  767,
  767,
  767,
  766,
  766,
  766,
  765,
  765,
  765,
  764,
  764,
  764,
  764,
  763,
  763,
  763,
  762,
  762,
  762,
  761,
  761,
  761,
  760,
  760,
  760,
  760,
  759,
  759,
  759,
  758,
  758,
  758,
  757,
  757,
  757,
  756,
  756,
  756,
  756,
  755,
  755,
  755,
  754,
  754,
  754,
  753,
  753,
  753,
  753,
  752,
  752,
  752,
  751,
  751,
  751,
  750,
  750,
  750,
  750,
  749,
  749,
  749,
  748,
  748,
  748,
  747,
  747,
  747,
  747,
  746,
  746,
  746,
  745,
  745,
  745,
  744,
  744,
  744,
  744,
  743,
  743,
  743,
  742,
  742,
  742,
  741,
  741,
  741,
  741,
  740,
  740,
  740,
  739,
  739,
  739,
  739,
  738,
  738,
  738,
  737,
  737,
  737,
  737,
  736,
  736,
  736,
  735,
  735,
  735,
  735,
  734,
  734,
  734,
  733,
  733,
  733,
  732,
  732,
  732,
  732,
  731,
  731,
  731,
  730,
  730,
  730,
  730,
  729,
  729,
  729,
  729,
  728,
  728,
  728,
  727,
  727,
  727,
  727,
  726,
  726,
  726,
  725,
  725,
  725,
  725,
  724,
  724,
  724,
  723,
  723,
  723,
  723,
  722,
  722,
  722,
  721,
  721,
  721,
  721,
  720,
  720,
  720,
  720,
  719,
  719,
  719,
  718,
  718,
  718,
  718,
  717,
  717,
  717,
  717,
  716,
  716,
  716,
  715,
  715,
  715,
  715,
  714,
  714,
  714,
  714,
  713,
  713,
  713,
  712,
  712,
  712,
  712,
  711,
  711,
  711,
  711,
  710,
  710,
  710,
  709,
  709,
  709,
  709,
  708,
  708,
  708,
  708,
  707,
  707,
  707,
  707,
  706,
  706,
  706,
  705,
  705,
  705,
  705,
  704,
  704,
  704,
  704,
  703,
  703,
  703,
  703,
  702,
  702,
  702,
  701,
  701,
  701,
  701,
  700,
  700,
  700,
  700,
  699,
  699,
  699,
  699,
  698,
  698,
  698,
  698,
  697,
  697,
  697,
  697,
  696,
  696,
  696,
  695,
  695,
  695,
  695,
  694,
  694,
  694,
  694,
  693,
  693,
  693,
  693,
  692,
  692,
  692,
  692,
  691,
  691,
  691,
  691,
  690,
  690,
  690,
  690,
  689,
  689,
  689,
  689,
  688,
  688,
  688,
  688,
  687,
  687,
  687,
  687,
  686,
  686,
  686,
  686,
  685,
  685,
  685,
  685,
  684,
  684,
  684,
  684,
  683,
  683,
  683,
  683,
  682,
  682,
  682,
  682,
  681,
  681,
  681,
  681,
  680,
  680,
  680,
  680,
  679,
  679,
  679,
  679,
  678,
  678,
  678,
  678,
  677,
  677,
  677,
  677,
  676,
  676,
  676,
  676,
  675,
  675,
  675,
  675,
  674,
  674,
  674,
  674,
  673,
  673,
  673,
  673,
  673,
  672,
  672,
  672,
  672,
  671,
  671,
  671,
  671,
  670,
  670,
  670,
  670,
  669,
  669,
  669,
  669,
  668,
  668,
  668,
  668,
  667,
  667,
  667,
  667,
  667,
  666,
  666,
  666,
  666,
  665,
  665,
  665,
  665,
  664,
  664,
  664,
  664,
  663,
  663,
  663,
  663,
  663,
  662,
  662,
  662,
  662,
  661,
  661,
  661,
  661,
  660,
  660,
  660,
  660,
  659,
  659,
  659,
  659,
  659,
  658,
  658,
  658,
  658,
  657,
  657,
  657,
  657,
  656,
  656,
  656,
  656,
  656,
  655,
  655,
  655,
  655,
  654,
  654,
  654,
  654,
  653,
  653,
  653,
  653,
  653,
  652,
  652,
  652,
  652,
  651,
  651,
  651,
  651,
  651,
  650,
  650,
  650,
  650,
  649,
  649,
  649,
  649,
  649,
  648,
  648,
  648,
  648,
  647,
  647,
  647,
  647,
  646,
  646,
  646,
  646,
  646,
  645,
  645,
  645,
  645,
  644,
  644,
  644,
  644,
  644,
  643,
  643,
  643,
  643,
  643,
  642,
  642,
  642,
  642,
  641,
  641,
  641,
  641,
  641,
  640,
  640,
  640,
  640,
  639,
  639,
  639,
  639,
  639,
  638,
  638,
  638,
  638,
  637,
  637,
  637,
  637,
  637,
  636,
  636,
  636,
  636,
  636,
  635,
  635,
  635,
  635,
  634,
  634,
  634,
  634,
  634,
  633,
  633,
  633,
  633,
  633,
  632,
  632,
  632,
  632,
  631,
  631,
  631,
  631,
  631,
  630,
  630,
  630,
  630,
  630,
  629,
  629,
  629,
  629,
  628,
  628,
  628,
  628,
  628,
  627,
  627,
  627,
  627,
  627,
  626,
  626,
  626,
  626,
  626,
  625,
  625,
  625,
  625,
  625,
  624,
  624,
  624,
  624,
  623,
  623,
  623,
  623,
  623,
  622,
  622,
  622,
  622,
  622,
  621,
  621,
  621,
  621,
  621,
  620,
  620,
  620,
  620,
  620,
  619,
  619,
  619,
  619,
  619,
  618,
  618,
  618,
  618,
  617,
  617,
  617,
  617,
  617,
  616,
  616,
  616,
  616,
  616,
  615,
  615,
  615,
  615,
  615,
  614,
  614,
  614,
  614,
  614,
  613,
  613,
  613,
  613,
  613,
  612,
  612,
  612,
  612,
  612,
  611,
  611,
  611,
  611,
  611,
  610,
  610,
  610,
  610,
  610,
  609,
  609,
  609,
  609,
  609,
  608,
  608,
  608,
  608,
  608,
  607,
  607,
  607,
  607,
  607,
  606,
  606,
  606,
  606,
  606,
  606,
  605,
  605,
  605,
  605,
  605,
  604,
  604,
  604,
  604,
  604,
  603,
  603,
  603,
  603,
  603,
  602,
  602,
  602,
  602,
  602,
  601,
  601,
  601,
  601,
  601,
  600,
  600,
  600,
  600,
  600
};

uint16_t rpm_from_us(uint32_t ticks_us)
{
  if (ticks_us < rpm_tab_ticks0_)
  {
    ticks_us = rpm_tab_ticks0_;
  }
  if (ticks_us >= CRANK_TIMEOUT_USECS)
  {
    return 0;
  }
  ticks_us -= rpm_tab_ticks0_;

  return pgm_read_word( &(rpm_tab_[ticks_us >> 5]) );
}
